/**
 * User: sul4bh
 * Date: 12/17/11
 * Time: 11:44 PM
 * http://sul4bh.wordpress.com/2011/12/18/jquery-snowfall-plugin/
 */

var intervalId;(function(e){e.fn.snowFall=function(t){function r(t){if(s.currTotal<=n.total)for(i=0;i<t;i++){var r=e("<div class='snow'>‚ùÑ</div>");r.css("color",n.color);r.css("position","absolute");r.css("opacity","0.9");var o=Math.random()*15+8;r.css("font-size",o);r.css("top",0);var u=Math.floor(Math.random()*e(window).width()-5);r.css("left",u);r.data("direction",Math.floor(Math.random()*3)-1);r.data("speed",Math.floor(Math.random()*2)+1);r.data("iter",0);e("body").append(r);s.currTotal++}}var n={color:"#eee",interval:10,total:20};if(t){e.extend(n,t)}var s={};s.currTotal=0;r(5);setInterval(function(){e(".snow").each(function(){var t=e(this).data("speed");var n=e(this).data("iter");var r=e(this).data("direction");e(this).data("iter",n+1);if(t==n){e(this).data("iter",0);var i=e(this).position();if(i.top+40<e(window).height()){e(this).css("top",i.top+1)}else{e(this).remove();s.currTotal--;return 0}if(i.left+20<e(document).width()&&i.left>0)e(this).css("left",i.left+r);else{e(this).remove();s.currTotal--;return 0}}})},n.interval);intervalId=setInterval(function(){r(1)},1e3)};e.fn.stopFall=function(){clearInterval(intervalId)}})(jQuery)

jQuery('html body').snowFall({color:'#fff',interval:'10',total:'20'});